# Консольный мессенджер.

Исполнитель: Дикарев Артём, БИБ255.

### Установка:
```bash
git clone https://github.com/araldikarev/console-messager-aip.git

cd console-messager-aip
```

Далее:

```bash
pip install -r requirements.txt
```

### Использование:

**Запуск сервера**:
```bash
python main_server.py
```

**Запуск сервера с аргументами**:
```bash
python main_server.py --host 0.0.0.0 --port 12000 --db-path server/prod.db --jwt-secret SUPER_SECRET --jwt-exp 48
```

* `--host`: IP-адрес хоста, на котором будет запущен сервер (по умолчанию `127.0.0.1`).
* `--port`: Порт, который будет слушать сервер (по умолчанию `12000`).
* `--db-path`: Путь к файлу базы данных SQLite (по умолчанию `server/database.db`).
* `--jwt-secret`: Секретный ключ для генерации и валидации JWT токенов (по умолчанию `UNSAFE_JWT_SECRET_KEY`).
* `--jwt-algo`: Алгоритм шифрования JWT (по умолчанию `HS256`).
* `--jwt-exp`: Время жизни токена авторизации в часах (по умолчанию `24`).

**Запуск клиента (в другой консоли)**:
```
python main_client.py
```

**Запуск клиента с аргументами**:
```bash
python main_client.py --host 127.0.0.1 --port 12000
```

* `--host`: IP-адрес сервера (по умолчанию `127.0.0.1`).
* `--port`: Порт сервера (по умолчанию `12000`).

### Базовые команды

* `/help` - команда для вывода существующих команд.
* `/register` - команда для регистрации пользователя.
* `/login` - команда для авторизации пользователя.
* `/token` - просмотр своего JWT токена.
* `/msg` - команда для отправки сообщений пользователю.
* `/history` - команда для получения истории переписки с пользователем.
* `/users` - команда для вывода списка пользователей.
* `/find` - команда для поиска пользователя по username/login.


### Архитектура коротко

**client/** - компоненты клиента: регистрация команд, передача контекстов с потоком чтения и записи и тд.

**server/** - компоненты сервера: регистрация эндпоинтов, передача серверных контекстов с потоком чтения и записи и тд.

**dto/** - папка с моделями передачи данных (pydantic)

**tests/** - папка с тестами функций (pytest).

**security.py** - общий файл для работы с криптографией (Fernet, RSA)
